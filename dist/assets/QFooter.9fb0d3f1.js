import{u as se,aX as J,L as ue,l as b,v,B as T,a1 as Ie,C as ce,au as $e,av as Me,x as A,y as Pe,Q as ie,bj as ke,E as fe,z as xe,A as Y,a3 as De,a7 as Ve,G as Fe}from"./index.80e62e10.js";import{Q as ve}from"./QScrollObserver.c345a1c6.js";import{r as ze}from"./rtl.b51694b1.js";function He(t,D,$){const h=$===!0?["left","right"]:["top","bottom"];return`absolute-${D===!0?h[0]:h[1]}${t?` text-${t}`:""}`}const Qe=["left","center","right","justify"];var Oe=se({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>Qe.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:D,emit:$}){const{proxy:h}=fe(),{$q:r}=h,{registerTick:L}=J(),{registerTick:y}=J(),{registerTick:z}=J(),{registerTimeout:M,removeTimeout:H}=ue(),{registerTimeout:V,removeTimeout:Q}=ue(),I=b(null),g=b(null),q=b(t.modelValue),f=b(!1),w=b(!0),F=b(!1),E=b(!1),m=[],P=b(0),a=b(!1);let c=null,S=null,_;const de=v(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:He(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),he=v(()=>{const e=P.value,o=q.value;for(let n=0;n<e;n++)if(m[n].name.value===o)return!0;return!1}),ge=v(()=>`q-tabs__content--align-${f.value===!0?"left":E.value===!0?"justify":t.align}`),me=v(()=>`q-tabs row no-wrap items-center q-tabs--${f.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),be=v(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ge.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),W=v(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),j=v(()=>t.vertical!==!0&&r.lang.rtl===!0),G=v(()=>ze===!1&&j.value===!0);T(j,x),T(()=>t.modelValue,e=>{K({name:e,setCurrent:!0,skipEmit:!0})}),T(()=>t.outsideArrows,O);function K({name:e,setCurrent:o,skipEmit:n}){q.value!==e&&(n!==!0&&t["onUpdate:modelValue"]!==void 0&&$("update:modelValue",e),(o===!0||t["onUpdate:modelValue"]===void 0)&&(we(q.value,e),q.value=e))}function O(){L(()=>{Z({width:I.value.offsetWidth,height:I.value.offsetHeight})})}function Z(e){if(W.value===void 0||g.value===null)return;const o=e[W.value.container],n=Math.min(g.value[W.value.scroll],Array.prototype.reduce.call(g.value.children,(s,u)=>s+(u[W.value.content]||0),0)),i=o>0&&n>o;f.value=i,i===!0&&y(x),E.value=o<parseInt(t.breakpoint,10)}function we(e,o){const n=e!=null&&e!==""?m.find(s=>s.name.value===e):null,i=o!=null&&o!==""?m.find(s=>s.name.value===o):null;if(n&&i){const s=n.tabIndicatorRef.value,u=i.tabIndicatorRef.value;c!==null&&(clearTimeout(c),c=null),s.style.transition="none",s.style.transform="none",u.style.transition="none",u.style.transform="none";const l=s.getBoundingClientRect(),d=u.getBoundingClientRect();u.style.transform=t.vertical===!0?`translate3d(0,${l.top-d.top}px,0) scale3d(1,${d.height?l.height/d.height:1},1)`:`translate3d(${l.left-d.left}px,0,0) scale3d(${d.width?l.width/d.width:1},1,1)`,z(()=>{c=setTimeout(()=>{c=null,u.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",u.style.transform="none"},70)})}i&&f.value===!0&&k(i.rootRef.value)}function k(e){const{left:o,width:n,top:i,height:s}=g.value.getBoundingClientRect(),u=e.getBoundingClientRect();let l=t.vertical===!0?u.top-i:u.left-o;if(l<0){g.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(l),x();return}l+=t.vertical===!0?u.height-s:u.width-n,l>0&&(g.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(l),x())}function x(){const e=g.value;if(e===null)return;const o=e.getBoundingClientRect(),n=t.vertical===!0?e.scrollTop:Math.abs(e.scrollLeft);j.value===!0?(w.value=Math.ceil(n+o.width)<e.scrollWidth-1,F.value=n>0):(w.value=n>0,F.value=t.vertical===!0?Math.ceil(n+o.height)<e.scrollHeight:Math.ceil(n+o.width)<e.scrollWidth)}function p(e){S!==null&&clearInterval(S),S=setInterval(()=>{qe(e)===!0&&R()},5)}function ee(){p(G.value===!0?Number.MAX_SAFE_INTEGER:0)}function te(){p(G.value===!0?0:Number.MAX_SAFE_INTEGER)}function R(){S!==null&&(clearInterval(S),S=null)}function Te(e,o){const n=Array.prototype.filter.call(g.value.children,d=>d===o||d.matches&&d.matches(".q-tab.q-focusable")===!0),i=n.length;if(i===0)return;if(e===36)return k(n[0]),n[0].focus(),!0;if(e===35)return k(n[i-1]),n[i-1].focus(),!0;const s=e===(t.vertical===!0?38:37),u=e===(t.vertical===!0?40:39),l=s===!0?-1:u===!0?1:void 0;if(l!==void 0){const d=j.value===!0?-1:1,C=n.indexOf(o)+l*d;return C>=0&&C<i&&(k(n[C]),n[C].focus({preventScroll:!0})),!0}}const ye=v(()=>G.value===!0?{get:e=>Math.abs(e.scrollLeft),set:(e,o)=>{e.scrollLeft=-o}}:t.vertical===!0?{get:e=>e.scrollTop,set:(e,o)=>{e.scrollTop=o}}:{get:e=>e.scrollLeft,set:(e,o)=>{e.scrollLeft=o}});function qe(e){const o=g.value,{get:n,set:i}=ye.value;let s=!1,u=n(o);const l=e<u?-1:1;return u+=l*5,u<0?(s=!0,u=0):(l===-1&&u<=e||l===1&&u>=e)&&(s=!0,u=e),i(o,u),x(),s}function oe(e,o){for(const n in e)if(e[n]!==o[n])return!1;return!0}function Ce(){let e=null,o={matchedLen:0,queryDiff:9999,hrefLen:0};const n=m.filter(l=>l.routeData!==void 0&&l.routeData.hasRouterLink.value===!0),{hash:i,query:s}=h.$route,u=Object.keys(s).length;for(const l of n){const d=l.routeData.exact.value===!0;if(l.routeData[d===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:C,query:N,matched:Be,href:Ae}=l.routeData.resolvedLink.value,X=Object.keys(N).length;if(d===!0){if(C!==i||X!==u||oe(s,N)===!1)continue;e=l.name.value;break}if(C!==""&&C!==i||X!==0&&oe(N,s)===!1)continue;const B={matchedLen:Be.length,queryDiff:u-X,hrefLen:Ae.length-C.length};if(B.matchedLen>o.matchedLen){e=l.name.value,o=B;continue}else if(B.matchedLen!==o.matchedLen)continue;if(B.queryDiff<o.queryDiff)e=l.name.value,o=B;else if(B.queryDiff!==o.queryDiff)continue;B.hrefLen>o.hrefLen&&(e=l.name.value,o=B)}e===null&&m.some(l=>l.routeData===void 0&&l.name.value===q.value)===!0||K({name:e,setCurrent:!0})}function Le(e){if(H(),a.value!==!0&&I.value!==null&&e.target&&typeof e.target.closest=="function"){const o=e.target.closest(".q-tab");o&&I.value.contains(o)===!0&&(a.value=!0,f.value===!0&&k(o))}}function Se(){M(()=>{a.value=!1},30)}function U(){ae.avoidRouteWatcher===!1?V(Ce):Q()}function ne(){if(_===void 0){const e=T(()=>h.$route.fullPath,U);_=()=>{e(),_=void 0}}}function _e(e){m.push(e),P.value++,O(),e.routeData===void 0||h.$route===void 0?V(()=>{if(f.value===!0){const o=q.value,n=o!=null&&o!==""?m.find(i=>i.name.value===o):null;n&&k(n.rootRef.value)}}):(ne(),e.routeData.hasRouterLink.value===!0&&U())}function Re(e){m.splice(m.indexOf(e),1),P.value--,O(),_!==void 0&&e.routeData!==void 0&&(m.every(o=>o.routeData===void 0)===!0&&_(),U())}const ae={currentModel:q,tabProps:de,hasFocus:a,hasActiveTab:he,registerTab:_e,unregisterTab:Re,verifyRouteModel:U,updateModel:K,onKbdNavigate:Te,avoidRouteWatcher:!1};Ie(ke,ae);function le(){c!==null&&clearTimeout(c),R(),_!==void 0&&_()}let re;return ce(le),$e(()=>{re=_!==void 0,le()}),Me(()=>{re===!0&&ne(),O()}),()=>A("div",{ref:I,class:me.value,role:"tablist",onFocusin:Le,onFocusout:Se},[A(ve,{onResize:Z}),A("div",{ref:g,class:be.value,onScroll:x},Pe(D.default)),A(ie,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(w.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||r.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:ee,onTouchstartPassive:ee,onMouseupPassive:R,onMouseleavePassive:R,onTouchendPassive:R}),A(ie,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||r.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:te,onTouchstartPassive:te,onMouseupPassive:R,onMouseleavePassive:R,onTouchendPassive:R})])}}),Ue=se({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:D,emit:$}){const{proxy:{$q:h}}=fe(),r=xe(Fe,Y);if(r===Y)return console.error("QFooter needs to be child of QLayout"),Y;const L=b(parseInt(t.heightHint,10)),y=b(!0),z=b(De.value===!0||r.isContainer.value===!0?0:window.innerHeight),M=v(()=>t.reveal===!0||r.view.value.indexOf("F")>-1||h.platform.is.ios&&r.isContainer.value===!0),H=v(()=>r.isContainer.value===!0?r.containerHeight.value:z.value),V=v(()=>{if(t.modelValue!==!0)return 0;if(M.value===!0)return y.value===!0?L.value:0;const a=r.scroll.value.position+H.value+L.value-r.height.value;return a>0?a:0}),Q=v(()=>t.modelValue!==!0||M.value===!0&&y.value!==!0),I=v(()=>t.modelValue===!0&&Q.value===!0&&t.reveal===!0),g=v(()=>"q-footer q-layout__section--marginal "+(M.value===!0?"fixed":"absolute")+"-bottom"+(t.bordered===!0?" q-footer--bordered":"")+(Q.value===!0?" q-footer--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus"+(M.value!==!0?" hidden":""):"")),q=v(()=>{const a=r.rows.value.bottom,c={};return a[0]==="l"&&r.left.space===!0&&(c[h.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),a[2]==="r"&&r.right.space===!0&&(c[h.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),c});function f(a,c){r.update("footer",a,c)}function w(a,c){a.value!==c&&(a.value=c)}function F({height:a}){w(L,a),f("size",a)}function E(){if(t.reveal!==!0)return;const{direction:a,position:c,inflectionPoint:S}=r.scroll.value;w(y,a==="up"||c-S<100||r.height.value-H.value-c-L.value<300)}function m(a){I.value===!0&&w(y,!0),$("focusin",a)}T(()=>t.modelValue,a=>{f("space",a),w(y,!0),r.animate()}),T(V,a=>{f("offset",a)}),T(()=>t.reveal,a=>{a===!1&&w(y,t.modelValue)}),T(y,a=>{r.animate(),$("reveal",a)}),T([L,r.scroll,r.height],E),T(()=>h.screen.height,a=>{r.isContainer.value!==!0&&w(z,a)});const P={};return r.instances.footer=P,t.modelValue===!0&&f("size",L.value),f("space",t.modelValue),f("offset",V.value),ce(()=>{r.instances.footer===P&&(r.instances.footer=void 0,f("size",0),f("offset",0),f("space",!1))}),()=>{const a=Ve(D.default,[A(ve,{debounce:0,onResize:F})]);return t.elevated===!0&&a.push(A("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),A("footer",{class:g.value,style:q.value,onFocusin:m},a)}}});export{Oe as Q,Ue as a};
